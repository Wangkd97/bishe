<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ysu.tour.dao.ActiveMapper" >
    <resultMap id="BaseResultMap" type="com.ysu.tour.pojo.Active" >

        <id column="_id" property="aId" jdbcType="INTEGER" />
        <result column="a_status" property="aStatus" jdbcType="INTEGER" />
        <result column="s_id" property="sId" jdbcType="INTEGER" />
        <result column="s_name" property="name" jdbcType="VARCHAR" />
    </resultMap>

    <resultMap id="StrategyResultMap" type="com.ysu.tour.pojo.Category" >
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="s_id" property="sId" jdbcType="INTEGER" />
        <result column="s_time" property="sTime" jdbcType="VARCHAR" />
        <result column="s_name" property="sName" jdbcType="VARCHAR" />
        <result column="s_cover" property="sCover" jdbcType="VARCHAR" />
        <result column="s_text" property="sText" jdbcType="VARCHAR" />
        <result column="s_day" property="sDay" jdbcType="INTEGER" />
        <result column="s_pay" property="sPay" jdbcType="INTEGER" />
        <result column="s_status" property="sStatus" jdbcType="INTEGER" />
        <result column="s_com_num" property="sComNum" jdbcType="INTEGER" />
        <result column="s_cli_num" property="sCliNum" jdbcType="INTEGER" />
        <result column="s_look_num" property="sLookNum" jdbcType="INTEGER" />
        <result column="s_pic_id" property="sPicId" jdbcType="INTEGER" />
        <result column="s_people_id" property="sPeopleId" jdbcType="INTEGER" />
        <result column="s_play_id" property="sPlayId" jdbcType="INTEGER" />
        <result column="s_season_id" property="sSeasonId" jdbcType="INTEGER" />
        <result column="s_gotime" property="sGotime" jdbcType="VARCHAR"/>
        <result column="s_master_id" property="sMasterId" jdbcType="INTEGER"></result>
        <result column="s_active_num" property="sActiveNum" jdbcType="INTEGER"></result>
    </resultMap>


    <insert id="insert" parameterType="com.ysu.tour.pojo.Active">
      insert into active_table  (a_status, s_id)
    values (#{aStatus,jdbcType=INTEGER}, #{sId,jdbcType=INTEGER})

    </insert>


    <select id="selectTopFive" resultMap="StrategyResultMap">
       select strategy_table.s_id,s_cover,s_name from  active_table inner join strategy_table on
       strategy_table.s_id=active_table.s_id where a_status=1
    </select>

    <!--Admin-->

    <update id="sysUpdateStatus" parameterType="com.ysu.tour.pojo.Active">
          update active_table set a_status = #{aStatus} where s_id= #{sId}
    </update>

    <select id="sysSelectTopTen" resultMap="BaseResultMap">
    select strategy_table.s_id,a_status, s_name from  active_table inner join strategy_table on strategy_table.s_id=active_table.s_id ORDER BY s_active_num  desc ,s_cli_num desc limit 0,10

    </select>

    <update id="delete">
        TRUNCATE  table active_table
    </update>
</mapper>